<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="robots" content="index, follow">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Le fichier DotEnv au travers de Laravel</title>
        <meta name="description" content="Cet article présente le cadre d&#039;utilisation du fichier DotEnv (_.env_) disponible sur Laravel pour configurer votre application avec des variables d&#039;environnements fournies par la machine qui l&#039;héberge.">
        <meta name="keywords" content="Laravel, DotEnv, env, environment variables, envs vars, PHP, Composer, vlucas/phpdotenv, Illuminate\Support\Env, env(), APP_KEY">
        <meta name="author" content="Antoine Benevaut">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://www.abenevaut.dev/2023‐01‐12-dotenv-environment-management-on-laravel.html">
        <meta property="og:title" content="Le fichier DotEnv au travers de Laravel">
        <meta property="og:description" content="Cet article présente le cadre d&#039;utilisation du fichier DotEnv (_.env_) disponible sur Laravel pour configurer votre application avec des variables d&#039;environnements fournies par la machine qui l&#039;héberge.">
        <meta property="og:image" content="https://www.abenevaut.dev/images/abenevaut-og.webp">

        <meta property="twitter:card" content="summary_large_image">
        <meta name=”twitter:creator” content=”@abenevaut”>
        <meta property="twitter:url" content="https://www.abenevaut.dev/2023‐01‐12-dotenv-environment-management-on-laravel.html">
        <meta property="twitter:title" content="Le fichier DotEnv au travers de Laravel">
        <meta property="twitter:description" content="Cet article présente le cadre d&#039;utilisation du fichier DotEnv (_.env_) disponible sur Laravel pour configurer votre application avec des variables d&#039;environnements fournies par la machine qui l&#039;héberge.">
        <meta property="twitter:image" content="https://www.abenevaut.dev/images/abenevaut-og.webp">
        <meta property="twitter:image:alt" content="Cet article présente le cadre d&#039;utilisation du fichier DotEnv (_.env_) disponible sur Laravel pour configurer votre application avec des variables d&#039;environnements fournies par la machine qui l&#039;héberge.">

        <base href="/"> <!-- /dev.abenevaut/abenevaut/dist/ -->
        <link rel="canonical" href="https://www.abenevaut.dev/2023‐01‐12-dotenv-environment-management-on-laravel.html" />
        <link rel="manifest" href="manifest.webmanifest" />

            <script>
      window.article = "<a href=\"#resume\"><h1 id='resume'>R\u00e9sum\u00e9<\/h1><\/a>\n<p>Cet article pr\u00e9sente le cadre d'utilisation du fichier DotEnv (<em>.env<\/em>) disponible sur Laravel pour configurer votre application avec des variables d'environnements fournies par la machine qui l'h\u00e9berge.<\/p>\n<a href=\"#preambule\"><h1 id='preambule'>Pr\u00e9ambule<\/h1><\/a>\n<p><a href=\"https:\/\/www.abenevaut.dev\/2023%E2%80%9001%E2%80%9001-create-and-modify-environment-variables-on-operating-system.html\">Create and modify environment variables on operating system<\/a><\/p>\n<p>Tous les logiciels qui se placent entre votre OS et votre code, notamment pour les languages de scripts (PHP, Python etc..), peuvent eux aussi injecter des variables d'environnements.\nC'est le cas pour NGINX et Apache2, par exemple.<\/p>\n<a href=\"#limplementation-laravel\"><h1 id='limplementation-laravel'>L'impl\u00e9mentation Laravel<\/h1><\/a>\n<p>Laravel exploite la librairie <a href=\"https:\/\/github.com\/vlucas\/phpdotenv\">vlucas\/phpdotenv<\/a> qui a la fonction d'aller chercher la valeur d'une variable d'environnement et dont l'utilisation a \u00e9t\u00e9 rendu tr\u00e8s simple gr\u00e2ce \u00e0 la classe <code>Illuminate\\Support\\Env<\/code> et \u00e0 la fonction <code>env()<\/code> (qui exploite la classe <code>Env<\/code>).<\/p>\n<p>Ainsi, la fonction <code>env()<\/code> va\u00a0:<\/p>\n<ul>\n<li>tenter de trouver une variable dans le fichier <code>.env<\/code>\n<\/li>\n<li>si elle existe, la fonction vous retournera sa valeur trouv\u00e9e dans le <code>.env<\/code>\n<\/li>\n<li>si elle n'existe pas\n<ul>\n<li>va tenter de trouver cette variable dans l'environnement de l'OS\n<ul>\n<li>si elle existe, la fonction vous retournera sa valeur fournie par l'OS<\/li>\n<li>si elle n'existe pas, vous retournera <code>null<\/code>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<p>En cas de recherche infructueuse, la fonction vous permet d'ajouter une valeur par d\u00e9faut qui vous sera alors retourn\u00e9e.<\/p>\n<pre><code class=\"language-php\">function env($key, $default = null);\n<\/code><\/pre>\n<p>Pour renseigner des variables dans votre fichier DotEnv, la syntaxe est la suivante\u00a0:<\/p>\n<pre><code class=\"language-env\">MY_VAR = MY_VALUE;\nAPP_NAME = &quot;My Application&quot;;\nBOT_NAME = &quot;My Bot&quot;;\n<\/code><\/pre>\n<blockquote>\n<p>Les variables sont en majuscule et les espaces combl\u00e9s par des underscores (&quot;_&quot;), cette syntaxe est inspire de celle utilis\u00e9e sur les syst\u00e8mes d'exploitations.\nNotez l'utilisation des simples ou doubles guillemets lorsqu'une valeur contient des espaces. Lorsque vous r\u00e9cup\u00e9rerez la variable, elle sera disponible sans ces guillemets.<\/p>\n<\/blockquote>\n<a href=\"#lutilisation\"><h1 id='lutilisation'>L'utilisation<\/h1><\/a>\n<p>Cr\u00e9ons un nouveau projet Laravel via composer, comme suit\u00a0:<\/p>\n<pre><code class=\"language-shell\">composer create-project laravel\/laravel example-app\n<\/code><\/pre>\n<p>Le fichier composer de votre nouveau projet (<code>example-app\/.composer.json<\/code>) a deux instructions post cr\u00e9ation:<\/p>\n<ul>\n<li>\n<code>post-root-package-install<\/code> qui va copi\u00e9 le fichier <code>.env.example<\/code> en un fichier <code>.env<\/code>\n<\/li>\n<li>\n<code>post-create-project-cmd<\/code> qui va configurer la variable d'env <code>APP_KEY<\/code>\n<\/li>\n<\/ul>\n<blockquote>\n<p>Le fichier <code>.env.example<\/code> sert de model pour la construction de votre fichier <code>.env<\/code>; je vous conseils de maintenir \u00e0 jour ce fichier et de le documenter pour que votre application puisse fonctionner correctement lorsque vous l'installez sur un nouvel environment, comme sur un nouveau serveur de production par exemple.<\/p>\n<\/blockquote>\n<blockquote>\n<p>Plus d'information sur l'APP_KEY ici<\/p>\n<ul>\n<li>\n<a href=\"https:\/\/laravel.com\/docs\/master\/encryption#configuration\">https:\/\/laravel.com\/docs\/master\/encryption#configuration<\/a>\n<\/li>\n<li>\n<a href=\"https:\/\/tighten.com\/insights\/app-key-and-you\/\">https:\/\/tighten.com\/insights\/app-key-and-you\/<\/a>\n<\/li>\n<\/ul>\n<\/blockquote>\n<blockquote>\n<p>\u00c0 ce stade, vous pouvez faire une pause dans la lecture de cette article et commencer \u00e0 jouer avec votre fichier DotEnv. Pour les plus curieux, param\u00e8tres quelques variables d'environnements sur votre machine \ud83d\ude09<\/p>\n<\/blockquote>\n<p>Jusqu'ici nous avons d\u00e9cortiquer le fonctionnement de l'utilisation de ce fichier, et vous avez maintenant assez de th\u00e9orie pour faire quelques tests sur votre OS et votre projet Laravel avec le fichier DotEnv mais dans le fond, \u00e0 quoi sert-il\u00a0?<\/p>\n<p>Sans trop de surprise, <strong>c'est un fichier de configuration<\/strong> qui permettra le param\u00e9trage de votre application. Les diff\u00e9rences notables avec les fichiers de configurations que vous rencontrerez dans le repertoire <code>config\/<\/code> sont\u00a0:<\/p>\n<ul>\n<li>ce fichier est destin\u00e9 \u00e0 \u00eatre une passerelle entre votre application et le serveur qui la sert<\/li>\n<li>ce fichier n'est pas obligatoire et peut \u00eatre remplace par des variables d'environnements du serveur qui la sert ou encore des variables d'environnements inject\u00e9es par un service d'h\u00e9bergement cloud (comme laravel vapor et laravel forge)<\/li>\n<li>ce fichier n'a pas de &quot;scope&quot;, il n'y a qu'un fichier d'environnement alors qu'il peut exister une infinite de fichier de configuration<\/li>\n<li>ce fichier n'est g\u00e9n\u00e9ralement pas commite sur les gestionnaires de versions (GIT etc..) ainsi les informations qu'il contient peuvent \u00eatre des donnees sensibles comme des clefs d'API pour un service que vous payez<\/li>\n<li>si vous souhaitez tout de meme commit ce fichier, il est possible de l'encrypter pour qu'il soit ind\u00e9chiffrable sur votre gestionnaire de version <a href=\"https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands\">https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands<\/a>\n<\/li>\n<li>ce fichier permet l'isolation entre les environnements de votre application ( <code>local<\/code> pour le d\u00e9veloppement et les tests et <code>production<\/code> pour votre app en ligne) des donnees qui ne sont attach\u00e9es qu'a un environnement precis pour assurer par exemple que les donnees de tests ne seront pas transmises \u00e0 une API de production<\/li>\n<\/ul>\n<a href=\"#resources\"><h1 id='resources'>Resources<\/h1><\/a>\n<ul>\n<li>https:\/\/laravel.com\/docs\/master\/installation#environment-based-configuration<\/li>\n<li>https:\/\/laravel.com\/docs\/master\/configuration<\/li>\n<li>https:\/\/laravel.com\/docs\/master\/encryption#configuration<\/li>\n<li>https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands<\/li>\n<li>https:\/\/github.com\/vlucas\/phpdotenv<\/li>\n<li>https:\/\/tighten.com\/insights\/app-key-and-you\/<\/li>\n<\/ul>\n"
    </script>
    <script type="module" src="assets/Article.js"></script>

        <link rel="preconnect" href="https://fonts.bunny.net">
        <link rel="stylesheet" href="assets/app.css">
        <link rel="shortcut icon" href="assets/app-icon.webp" type="image/webp">
    </head>
    <body class="font-sans antialiased">
        <div id="root"></div>
    </body>
</html>
