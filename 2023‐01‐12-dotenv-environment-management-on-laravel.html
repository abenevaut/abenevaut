<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="robots" content="index, follow">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Capture The Flags, COMCYBER challenges</title>
        <meta name="description" content="Mettez vos compétences en cybersécurité au service de l&#039;armée de Terre dans un challenge immersif organisé par le Commandement de la cyberdéfense.">
        <meta name="keywords" content="ctf, security, comcyber">
        <meta name="author" content="Antoine Benevaut">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://www.abenevaut.dev/2023‐01‐12-dotenv-environment-management-on-laravel.html">
        <meta property="og:title" content="Capture The Flags, COMCYBER challenges">
        <meta property="og:description" content="Mettez vos compétences en cybersécurité au service de l&#039;armée de Terre dans un challenge immersif organisé par le Commandement de la cyberdéfense.">
        <meta property="og:image" content="https://www.abenevaut.dev/images/abenevaut-og.webp">

        <meta property="twitter:card" content="summary_large_image">
        <meta name=”twitter:creator” content=”@abenevaut”>
        <meta property="twitter:url" content="https://www.abenevaut.dev/2023‐01‐12-dotenv-environment-management-on-laravel.html">
        <meta property="twitter:title" content="Capture The Flags, COMCYBER challenges">
        <meta property="twitter:description" content="Mettez vos compétences en cybersécurité au service de l&#039;armée de Terre dans un challenge immersif organisé par le Commandement de la cyberdéfense.">
        <meta property="twitter:image" content="https://www.abenevaut.dev/images/abenevaut-og.webp">
        <meta property="twitter:image:alt" content="Mettez vos compétences en cybersécurité au service de l&#039;armée de Terre dans un challenge immersif organisé par le Commandement de la cyberdéfense.">

            <link rel="canonical" href="//index.html" />
    <script>
      window.article = "<a href=\"#resume\"><h1 id='resume'>R\u00e9sum\u00e9<\/h1><\/a>\n<p>Cet article pr\u00e9sente le cadre d'utilisation du fichier DotEnv (<em>.env<\/em>) disponible sur Laravel pour configurer votre application avec des variables d'environements fournies par la machine qui l'heberge.<\/p>\n<a href=\"#preambule\"><h1 id='preambule'>Pr\u00e9ambule<\/h1><\/a>\n<p><a href=\"\/abenevaut.dev\/abenevaut.dev\/Articles%20Staging\/Create%20and%20modify%20environment%20variables%20on%20operating%20system.md\">Create and modify environment variables on operating system<\/a><\/p>\n<p>Tous les logiciels qui se placent entre votre OS et votre code, notamment pour les languages de scripts (PHP, Python etc..), peuvent eux aussi injecter des variables d'environments. C'est le cas pour NGINX et Apache2.<\/p>\n<ul>\n<li>\n<a href=\"\/abenevaut.dev\/abenevaut.dev\/Articles%20Staging\/Create%20and%20modify%20environment%20variables%20on%20NGINX.md\">Create and modify environment variables on NGINX<\/a>\n<\/li>\n<li>\n<a href=\"\/abenevaut.dev\/abenevaut.dev\/Articles%20Staging\/Create%20and%20modify%20environment%20variables%20on%20Apache2.md\">Create and modify environment variables on Apache2<\/a>\n<\/li>\n<\/ul>\n<a href=\"#limplementation-laravel\"><h1 id='limplementation-laravel'>L'impl\u00e9mentation Laravel<\/h1><\/a>\n<p>Laravel exploite la librairie <a href=\"https:\/\/github.com\/vlucas\/phpdotenv\">vlucas\/phpdotenv<\/a> qui a la fonction d'aller chercher la valeur d'une variable d'environnement et dont l'utilisation a \u00e9t\u00e9 rendu tr\u00e8s simple gr\u00e2ce \u00e0 la classe <code>Illuminate\\Support\\Env<\/code> et \u00e0 la fonction <code>env()<\/code> (qui exploite la classe <code>Env<\/code>).<\/p>\n<p>Ainsi, la fonction <code>env()<\/code> va:<\/p>\n<ul>\n<li>tenter de trouver une variable dans le fichier <code>.env<\/code>\n<\/li>\n<li>si elle existe, la fonction vous retournera sa valeur trouv\u00e9e dans le <code>.env<\/code>\n<\/li>\n<li>si elle n'existe pas\n<ul>\n<li>va tenter de trouver cette variable dans l'environnement de l'OS\n<ul>\n<li>si elle existe, la fonction vous retournera sa valeur fournie par l'OS<\/li>\n<li>si elle n'existe pas, vous retournera <code>null<\/code>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<p>En cas de recherche infructueuse, la fonction vous permet d'ajouter une valeur par d\u00e9faut qui vous sera alors retourn\u00e9e.<\/p>\n<pre><code class=\"language-javascript\">function env($key, $default = null);\n<\/code><\/pre>\n<p>Pour renseigner des variables dans votre fichier DotEnv, la syntaxe est la suivante:<\/p>\n<pre><code class=\"language-javascript\">MY_VAR = MY_VALUE;\nAPP_NAME = &quot;My Application&quot;;\nBOT_NAME = &quot;My Bot&quot;;\n<\/code><\/pre>\n<p>!! Les variables sont en majuscule et les espaces combles par des underscores (&quot;_&quot;), cette syntaxe est inspire de celle utilisee sur les systemes d'exploitations.\n!! Notez l'utilisation des simples ou doubles guillemets lorsqu'une valeur contient des espaces. Lorsque vous r\u00e9cup\u00e9rerez la variable, elle sera disponible sans ces guillemets.<\/p>\n<a href=\"#lutilisation\"><h1 id='lutilisation'>L'utilisation<\/h1><\/a>\n<p>Cr\u00e9ons un nouveau projet Laravel via composer, comme suit:<\/p>\n<pre><code class=\"language-javascript\">composer create-project laravel\/laravel example-app\n<\/code><\/pre>\n<p>Le fichier composer de votre nouveau projet (<code>example-app\/.composer.json<\/code>) a deux instructions post cr\u00e9ation:<\/p>\n<ul>\n<li>\n<code>post-root-package-install<\/code> qui va copi\u00e9 le fichier <code>.env.example<\/code> en un fichier <code>.env<\/code>\n<\/li>\n<li>\n<code>post-create-project-cmd<\/code> qui va configurer la variable d'env <code>APP_KEY<\/code>\n<\/li>\n<\/ul>\n<p>!! Le fichier <code>.env.example<\/code> sert de model pour la construction de votre fichier <code>.env<\/code>; je vous conseils de maintenir \u00e0 jour ce fichier et de le documenter pour que votre application puisse fonctionner correctement lorsque vous l'installez sur un nouvel environment, comme sur un nouveau serveur de production par exemple.<\/p>\n<p>!! Plus d'information sur l'APP_KEY ici\n!! - <a href=\"https:\/\/laravel.com\/docs\/master\/encryption#configuration\">https:\/\/laravel.com\/docs\/master\/encryption#configuration<\/a>\n!! - <a href=\"https:\/\/tighten.com\/insights\/app-key-and-you\/\">https:\/\/tighten.com\/insights\/app-key-and-you\/<\/a><\/p>\n<p>!! \u00c0 ce stade, vous pouvez faire une pause dans la lecture de cette article et commencer \u00e0 jouer avec votre fichier DotEnv. Pour les plus curieux, param\u00e8tres quelques variables d'environnements sur votre machine \ud83d\ude09<\/p>\n<p>Jusqu'ici nous avons d\u00e9cortiquer le fonctionnement de l'utilisation de ce fichier, et vous avez maintenant assez de th\u00e9orie pour faire quelques tests sur votre OS et votre projet Laravel avec le fichier DotEnv mais dans le fond, \u00e0 quoi sert-il ?<\/p>\n<p>Sans trop de surprise, <strong>c'est un fichier de configuration<\/strong> qui permettra le param\u00e8trage de votre application. Les diff\u00e9rences notables avec les fichiers de configurations que vous rencontrerez dans le repertoire <code>config\/<\/code> sont:<\/p>\n<ul>\n<li>ce fichier est destin\u00e9 a etre une passerelle entre votre application et le serveur qui la sert<\/li>\n<li>ce fichier n'est pas obligatoire et peut etre remplace par des variables d'environments du serveur qui la sert ou encore des variables d'environments injectees par un service d'hebergement cloud (comme laravel vapor et laravel forge)<\/li>\n<li>ce fichier n'a pas de &quot;scope&quot;, il n'y a qu'un fichier d'environement alors qu'il peut exister une infinite de fichier de configuration<\/li>\n<li>ce fichier n'est generalement pas commite sur les gestionnaires de versions (GIT etc..) ainsi les informations qu'il contient peuvent etre des donnees sensibles comme des clefs d'API pour un service que vous payez<\/li>\n<li>Si vous souhaitez tout de meme commit ce fichier, il est possible de l'encrypter pour qu'il soit indechiffrable sur votre gestionnaire de version <a href=\"https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands\">https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands<\/a>\n<\/li>\n<li>ce fichier permet l'isolation entre les environements de votre application ( <code>local<\/code> pour le developement et les tests et <code>production<\/code> pour votre app en ligne) des donnees qui ne sont attachees qu'a un environement precis pour assurer par exemple que les donnees de tests ne seront pas transmisent a une API de production<\/li>\n<\/ul>\n<a href=\"#resources\"><h1 id='resources'>Resources<\/h1><\/a>\n<ul>\n<li>https:\/\/laravel.com\/docs\/master\/installation#environment-based-configuration<\/li>\n<li>https:\/\/laravel.com\/docs\/master\/configuration<\/li>\n<li>https:\/\/laravel.com\/docs\/master\/encryption#configuration<\/li>\n<li>https:\/\/blog.laravel.com\/laravel-new-environment-encryption-commands<\/li>\n<li>https:\/\/github.com\/vlucas\/phpdotenv<\/li>\n<li>https:\/\/tighten.com\/insights\/app-key-and-you\/<\/li>\n<\/ul>\n"
    </script>
    <script type="module" src="assets/Article.js"></script>

        <link rel="preconnect" href="https://fonts.bunny.net">
        <link rel="stylesheet" href="assets/app.css">
        <link rel="shortcut icon" href="/assets/app-icon.webp" type="image/webp">
    </head>
    <body class="font-sans antialiased">
        <div id="root"></div>
    </body>
</html>
